generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id                    String                @id @default(cuid())
  email                 String                @unique
  username              String                @unique
  password              String
  role                  UserRole              @default(USER)
  createdAt             DateTime              @default(now())
  updatedAt             DateTime              @updatedAt
  switches              Switch[]
  shareableId           String                @unique @default(cuid())
  emailVerified         DateTime?
  verificationTokens    VerificationToken[]
}

model Switch {
  id              String    @id @default(cuid())
  name            String
  type            SwitchType
  springWeight    String?
  travel          String?
  manufacturer    String
  notes           String?
  imageUrl        String?
  topHousing      String?
  bottomHousing   String?
  stem            String?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  userId          String
  user            User      @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  id         String   @id @default(cuid())
  token      String   @unique
  userId     String
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  expiresAt  DateTime
  createdAt  DateTime @default(now())
}

enum UserRole {
  USER
  ADMIN
}

enum SwitchType {
  LINEAR
  TACTILE
  CLICKY
  SILENT_LINEAR
  SILENT_TACTILE
}